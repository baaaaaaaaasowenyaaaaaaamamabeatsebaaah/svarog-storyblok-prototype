<!-- docs/viewer.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Svarog-UI + Storyblok Documentation</title>
    <style>
      /* Modern documentation viewer styles */
      :root {
        --color-primary: #007bff;
        --color-primary-dark: #0056b3;
        --color-secondary: #6c757d;
        --color-success: #28a745;
        --color-danger: #dc3545;
        --color-warning: #ffc107;
        --color-info: #17a2b8;
        --color-bg: #ffffff;
        --color-bg-dark: #1a1a1a;
        --color-bg-secondary: #f8f9fa;
        --color-text: #333333;
        --color-text-light: #6c757d;
        --color-border: #dee2e6;
        --font-mono: 'Fira Code', Monaco, Consolas, monospace;
      }

      [data-theme='dark'] {
        --color-bg: #1a1a1a;
        --color-bg-secondary: #2d2d2d;
        --color-text: #e0e0e0;
        --color-text-light: #a0a0a0;
        --color-border: #404040;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        color: var(--color-text);
        background: var(--color-bg);
        line-height: 1.6;
        transition:
          background 0.3s,
          color 0.3s;
      }

      /* Header */
      .header {
        background: var(--color-bg-secondary);
        border-bottom: 1px solid var(--color-border);
        padding: 1rem 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--color-primary);
      }

      .header-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .theme-toggle {
        background: none;
        border: 1px solid var(--color-border);
        padding: 0.5rem;
        border-radius: 5px;
        cursor: pointer;
        color: var(--color-text);
      }

      /* Layout */
      .layout {
        display: flex;
        min-height: calc(100vh - 60px);
      }

      /* Sidebar */
      .sidebar {
        width: 280px;
        background: var(--color-bg-secondary);
        border-right: 1px solid var(--color-border);
        overflow-y: auto;
        padding: 2rem 0;
      }

      .nav-section {
        margin-bottom: 2rem;
        padding: 0 1.5rem;
      }

      .nav-section-title {
        font-size: 0.875rem;
        font-weight: 600;
        text-transform: uppercase;
        color: var(--color-text-light);
        margin: 0 0 0.75rem 0;
      }

      .nav-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .nav-item {
        margin: 0.25rem 0;
      }

      .nav-link {
        display: block;
        padding: 0.5rem 1rem;
        color: var(--color-text);
        text-decoration: none;
        border-radius: 5px;
        transition:
          background 0.2s,
          color 0.2s;
      }

      .nav-link:hover {
        background: var(--color-bg);
        color: var(--color-primary);
      }

      .nav-link.active {
        background: var(--color-primary);
        color: white;
      }

      /* Content */
      .content {
        flex: 1;
        overflow-y: auto;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 3rem 2rem;
      }

      /* Interactive Examples */
      .example-container {
        border: 1px solid var(--color-border);
        border-radius: 8px;
        margin: 2rem 0;
        overflow: hidden;
      }

      .example-header {
        background: var(--color-bg-secondary);
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--color-border);
      }

      .example-title {
        font-weight: 600;
      }

      .example-actions {
        display: flex;
        gap: 0.5rem;
      }

      .example-button {
        padding: 0.25rem 0.75rem;
        background: none;
        border: 1px solid var(--color-border);
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.875rem;
        color: var(--color-text);
      }

      .example-button:hover {
        background: var(--color-bg);
      }

      .example-preview {
        padding: 2rem;
        background: white;
        min-height: 200px;
      }

      .example-code {
        background: var(--color-bg-secondary);
        padding: 1rem;
        font-family: var(--font-mono);
        font-size: 0.875rem;
        overflow-x: auto;
        display: none;
      }

      .example-code.active {
        display: block;
      }

      /* Copy button */
      .copy-button {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        padding: 0.25rem 0.5rem;
        background: var(--color-bg);
        border: 1px solid var(--color-border);
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.75rem;
        opacity: 0;
        transition: opacity 0.2s;
      }

      pre:hover .copy-button {
        opacity: 1;
      }

      /* Props table */
      .props-table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
      }

      .props-table th,
      .props-table td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid var(--color-border);
      }

      .props-table th {
        background: var(--color-bg-secondary);
        font-weight: 600;
      }

      .prop-name {
        font-family: var(--font-mono);
        color: var(--color-primary);
      }

      .prop-type {
        font-family: var(--font-mono);
        color: var(--color-secondary);
        font-size: 0.875rem;
      }

      .prop-required {
        color: var(--color-danger);
      }

      /* Search */
      .search-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: flex-start;
        justify-content: center;
        padding-top: 10vh;
        z-index: 1000;
      }

      .search-overlay.active {
        display: flex;
      }

      .search-modal {
        background: var(--color-bg);
        border-radius: 8px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
        width: 90%;
        max-width: 600px;
        max-height: 70vh;
        display: flex;
        flex-direction: column;
      }

      .search-input-container {
        padding: 1rem;
        border-bottom: 1px solid var(--color-border);
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid var(--color-border);
        border-radius: 5px;
        font-size: 1rem;
        background: var(--color-bg);
        color: var(--color-text);
      }

      .search-results {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
      }

      .search-result {
        padding: 0.75rem 1rem;
        margin: 0.5rem 0;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.2s;
      }

      .search-result:hover {
        background: var(--color-bg-secondary);
      }

      .search-result-title {
        font-weight: 600;
        color: var(--color-primary);
      }

      .search-result-path {
        font-size: 0.875rem;
        color: var(--color-text-light);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .sidebar {
          position: fixed;
          left: 0;
          top: 60px;
          bottom: 0;
          transform: translateX(-100%);
          transition: transform 0.3s;
          z-index: 50;
        }

        .sidebar.active {
          transform: translateX(0);
        }

        .content {
          margin-left: 0;
        }

        .menu-toggle {
          display: block;
        }
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="header-title">üìö Svarog-UI + Storyblok Docs</div>
      <div class="header-actions">
        <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
        <button class="search-button" onclick="openSearch()">üîç Search</button>
      </div>
    </header>

    <div class="layout">
      <nav class="sidebar">
        <div class="nav-section">
          <h3 class="nav-section-title">Getting Started</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="#introduction" class="nav-link">Introduction</a>
            </li>
            <li class="nav-item">
              <a href="#quick-start" class="nav-link">Quick Start</a>
            </li>
            <li class="nav-item">
              <a href="#installation" class="nav-link">Installation</a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-section-title">Components</h3>
          <ul class="nav-list" id="components-nav">
            <!-- Dynamically populated -->
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-section-title">API Reference</h3>
          <ul class="nav-list" id="api-nav">
            <!-- Dynamically populated -->
          </ul>
        </div>
      </nav>

      <main class="content">
        <div class="container" id="doc-content">
          <!-- Documentation content loaded here -->
        </div>
      </main>
    </div>

    <!-- Search Overlay -->
    <div
      class="search-overlay"
      id="search-overlay"
      onclick="closeSearch(event)"
    >
      <div class="search-modal" onclick="event.stopPropagation()">
        <div class="search-input-container">
          <input
            type="text"
            class="search-input"
            placeholder="Search documentation..."
            id="search-input"
            autofocus
          />
        </div>
        <div class="search-results" id="search-results">
          <!-- Search results appear here -->
        </div>
      </div>
    </div>

    <script>
      // Documentation viewer functionality
      let searchIndex = null;
      let currentDoc = 'introduction';

      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        loadSearchIndex();
        loadDocumentation(currentDoc);
        populateNavigation();
        highlightActiveNav();
      });

      // Theme toggle
      function toggleTheme() {
        const isDark =
          document.documentElement.getAttribute('data-theme') === 'dark';
        document.documentElement.setAttribute(
          'data-theme',
          isDark ? 'light' : 'dark'
        );
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
      }

      // Load saved theme
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);

      // Search functionality
      function openSearch() {
        document.getElementById('search-overlay').classList.add('active');
        document.getElementById('search-input').focus();
      }

      function closeSearch(event) {
        if (event.target.id === 'search-overlay') {
          document.getElementById('search-overlay').classList.remove('active');
        }
      }

      // Keyboard shortcuts
      document.addEventListener('keydown', e => {
        if (e.metaKey && e.key === 'k') {
          e.preventDefault();
          openSearch();
        }

        if (e.key === 'Escape') {
          document.getElementById('search-overlay').classList.remove('active');
        }
      });

      // Load search index
      async function loadSearchIndex() {
        try {
          const response = await fetch('generated/assets/search-index.json');
          searchIndex = await response.json();
        } catch (error) {
          console.error('Failed to load search index:', error);
        }
      }

      // Search functionality
      document.getElementById('search-input').addEventListener('input', e => {
        const query = e.target.value.toLowerCase();
        const resultsContainer = document.getElementById('search-results');

        if (!query) {
          resultsContainer.innerHTML = '';
          return;
        }

        const results = searchDocumentation(query);

        resultsContainer.innerHTML = results
          .map(
            result => `
        <div class="search-result" onclick="navigateTo('${result.url}')">
          <div class="search-result-title">${result.title}</div>
          <div class="search-result-path">${result.path}</div>
        </div>
      `
          )
          .join('');
      });

      function searchDocumentation(query) {
        if (!searchIndex) return [];

        const results = [];
        const searchItems = [
          ...searchIndex.components.map(c => ({ ...c, type: 'Component' })),
          ...searchIndex.utilities.map(u => ({ ...u, type: 'Utility' })),
          ...searchIndex.features.map(f => ({ ...f, type: 'Feature' })),
        ];

        searchItems.forEach(item => {
          if (
            item.name.toLowerCase().includes(query) ||
            item.description.toLowerCase().includes(query)
          ) {
            results.push({
              title: item.name,
              path: `${item.type} / ${item.category}`,
              url: item.url,
            });
          }
        });

        return results.slice(0, 10); // Limit results
      }

      // Navigation
      function loadDocumentation(docId) {
        // Simulate loading documentation content
        const content = getDocumentationContent(docId);
        document.getElementById('doc-content').innerHTML = content;

        // Highlight code
        document.querySelectorAll('pre code').forEach(block => {
          if (window.hljs) {
            hljs.highlightBlock(block);
          }
        });

        // Add copy buttons
        document.querySelectorAll('pre').forEach(pre => {
          const button = document.createElement('button');
          button.className = 'copy-button';
          button.textContent = 'Copy';
          button.onclick = () => copyCode(pre);
          pre.style.position = 'relative';
          pre.appendChild(button);
        });

        currentDoc = docId;
        highlightActiveNav();
      }

      function copyCode(pre) {
        const code = pre.querySelector('code').textContent;
        navigator.clipboard.writeText(code);
        const button = pre.querySelector('.copy-button');
        button.textContent = 'Copied!';
        setTimeout(() => {
          button.textContent = 'Copy';
        }, 2000);
      }

      function populateNavigation() {
        // This would be populated from the actual documentation structure
        const components = ['Button', 'Card', 'Hero', 'Grid', 'Form'];
        const apis = ['Utilities', 'Validation', 'Performance', 'Integration'];

        document.getElementById('components-nav').innerHTML = components
          .map(
            c =>
              `<li class="nav-item"><a href="#component-${c.toLowerCase()}" class="nav-link">${c}</a></li>`
          )
          .join('');

        document.getElementById('api-nav').innerHTML = apis
          .map(
            a =>
              `<li class="nav-item"><a href="#api-${a.toLowerCase()}" class="nav-link">${a}</a></li>`
          )
          .join('');
      }

      function highlightActiveNav() {
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${currentDoc}`) {
            link.classList.add('active');
          }
        });
      }

      function navigateTo(url) {
        // Handle navigation
        window.location.hash = url;
        document.getElementById('search-overlay').classList.remove('active');
      }

      // Example content generator
      function getDocumentationContent(docId) {
        // This would load actual documentation
        return `
        <h1>Documentation Page</h1>
        <p>This is a placeholder for the ${docId} documentation.</p>
        
        <h2>Example Code</h2>
        <pre><code class="language-javascript">// Example component usage
const button = Button({
  text: 'Click me',
  variant: 'primary',
  onClick: () => console.log('Clicked!')
});

document.body.appendChild(button.getElement());</code></pre>
        
        <h2>Interactive Example</h2>
        <div class="example-container">
          <div class="example-header">
            <span class="example-title">Button Example</span>
            <div class="example-actions">
              <button class="example-button" onclick="toggleCode(this)">View Code</button>
              <button class="example-button">Edit in Sandbox</button>
            </div>
          </div>
          <div class="example-preview">
            <button style="padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 5px;">
              Example Button
            </button>
          </div>
          <div class="example-code">
            <code>const button = Button({ text: 'Example Button', variant: 'primary' });</code>
          </div>
        </div>
      `;
      }

      function toggleCode(button) {
        const container = button.closest('.example-container');
        const code = container.querySelector('.example-code');
        code.classList.toggle('active');
        button.textContent = code.classList.contains('active')
          ? 'Hide Code'
          : 'View Code';
      }
    </script>
  </body>
</html>
